<Project>

  <Import Project="$(MSBuildThisFileDirectory)Mustache.MSBuild.tasks" />

  <ItemGroup>
    <MustacheFiles Include="**/*.mustache" Exclude="$(DefaultItemExcludes);$(DefaultExcludesInProjectFolder)" />
  </ItemGroup>

  <PropertyGroup>
    <!-- Register "RenderMustacheTemplates" to run before a project is built. -->
    <CoreCompileDependsOn>RenderMustacheTemplates;$(CoreCompileDependsOn)</CoreCompileDependsOn>
  </PropertyGroup>

  <!--
    Renders all templates in the "MustacheFiles" item group.
  -->
  <Target Name="RenderMustacheTemplates" Condition=" '@(MustacheFiles)' != '' ">
    <RenderMustacheTemplates TemplatePaths="@(MustacheFiles)" />
  </Target>

</Project>
